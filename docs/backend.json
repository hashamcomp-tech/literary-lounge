
{
  "entities": {
    "UsernameMap": {
      "title": "Username Map",
      "description": "Mapping of username to email/uid for multi-identifier login.",
      "type": "object",
      "properties": {
        "uid": { "type": "string" },
        "email": { "type": "string" }
      },
      "required": ["uid", "email"]
    },
    "PublishRequest": {
      "title": "Publish Request",
      "description": "Reader application for cloud contributor status.",
      "type": "object",
      "properties": {
        "uid": { "type": "string" },
        "email": { "type": "string" },
        "requestedAt": { "type": "string", "format": "date-time" },
        "status": { "type": "string", "enum": ["pending", "approved", "rejected"] }
      },
      "required": ["uid", "email", "status"]
    },
    "Book": {
      "title": "Book",
      "description": "A cloud-hosted literary volume.",
      "type": "object",
      "properties": {
        "title": { "type": "string" },
        "author": { "type": "string" },
        "genre": { "type": "array", "items": { "type": "string" } },
        "views": { "type": "number" },
        "coverURL": { "type": "string" },
        "isCloud": { "type": "boolean" }
      },
      "required": ["title", "author", "genre"]
    },
    "ActivityLog": {
      "title": "Activity Log",
      "description": "Records user navigation and interaction events for administrative auditing.",
      "type": "object",
      "properties": {
        "uid": { "type": "string" },
        "email": { "type": "string" },
        "path": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" },
        "userAgent": { "type": "string" }
      },
      "required": ["path", "timestamp"]
    },
    "SupportReport": {
      "title": "Support Report",
      "description": "User submitted bug report or feature request.",
      "type": "object",
      "properties": {
        "uid": { "type": "string" },
        "email": { "type": "string" },
        "category": { "type": "string", "enum": ["Bug", "Feature Request", "Content Issue", "Other"] },
        "description": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" },
        "status": { "type": "string", "enum": ["new", "resolved"] }
      },
      "required": ["email", "category", "description", "status"]
    }
  },
  "auth": {
    "providers": ["email"]
  },
  "firestore": {
    "/usernames/{username}": { "schema": { "$ref": "#/entities/UsernameMap" }, "description": "Lookup index for username-based login." },
    "/publishRequests/{requestId}": { "schema": { "$ref": "#/entities/PublishRequest" }, "description": "Global queue for contributor vetting." },
    "/books/{bookId}": { "schema": { "$ref": "#/entities/Book" }, "description": "Main cloud library storage." },
    "/activityLogs/{logId}": { "schema": { "$ref": "#/entities/ActivityLog" }, "description": "Global trail of reader movements." },
    "/supportReports/{reportId}": { "schema": { "$ref": "#/entities/SupportReport" }, "description": "User feedback channel." }
  }
}
